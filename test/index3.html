<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Smiles Drawer Example</title>
        <meta name="description" content="A minimal smiles drawer example.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <textarea id="canvas"></textarea>
        <textarea id="svg"></textarea>
        <script>
            let svgPerf = '';
            let canvasPerf = '';

            let svgText = document.getElementById('svg');
            let canvasText = document.getElementById('canvas');

            for (let i = 1; i < 1000; i++) {
                let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                let canvas = document.createElement('canvas');
                
                svg.setAttribute('width', '200');
                svg.setAttribute('height', '200');
                canvas.setAttribute('width', '200');
                canvas.setAttribute('height', '200');

                let ctx = canvas.getContext('2d');

                let u = [];
                let v = [];
                let x = [];
                let y = [];
                
                for (let j = 0; j < 50; j++) {
                    u.push(Math.random() * 200);
                    v.push(Math.random() * 200);
                    x.push(Math.random() * 200);
                    y.push(Math.random() * 200);
                }

                let t = performance.now();

                for (let j = 0; j < 50; j++) {
                    ctx.beginPath();
                    ctx.moveTo(u[j], v[j]);
                    ctx.lineTo(x[j], y[j]);
                    ctx.lineWidth = 1;
                    ctx.stroke();
                    ctx.font = '10px Arial';
                    ctx.fillText('C', u[j], v[j]);
                }

                document.body.appendChild(canvas);

                let td = performance.now() - t;
                canvasPerf += td + '\n';

                t = performance.now();

                for (let j = 0; j < 50; j++) {
                    let line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', u[j]);
                    line.setAttribute('y1', v[j]);
                    line.setAttribute('x2', x[j]);
                    line.setAttribute('y2', y[j]);
                    line.setAttribute('stroke', 'rgb(0, 0, 0)');
                    line.setAttribute('stroke-width', 1);
                    svg.appendChild(line);

                    let text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', u[j]);
                    text.setAttribute('y', v[j]);  
                    let textNode = document.createTextNode('C');
                    text.appendChild(textNode);
                    svg.appendChild(text);
                }

                document.body.appendChild(svg);

                td = performance.now() - t;
                svgPerf += td + '\n';
            }

            canvasText.value = canvasPerf;
            svgText.value = svgPerf;
        </script>
    </body>
</html>
